<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title th:text="${title} ?: 'FAQ ‚Äî M·∫ßm Xanh'">FAQ ‚Äî M·∫ßm Xanh</title>
    <meta name="description" content="C√¢u h·ªèi th∆∞·ªùng g·∫∑p v·ªÅ ph√¢n b√≥n M·∫ßm Xanh: t√°i ch·∫ø v·ªè tr√°i c√¢y t·ª´ ch·ª£ th√†nh ph√¢n h·ªØu c∆°, c√°ch d√πng, b·∫£o qu·∫£n, an to√†n, ƒë·∫∑t mua." />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;600;700&display=swap" rel="stylesheet" />

    <style>
        :root {
          --bg:#f7fbf7; --surface:#fff; --text:#243522; --muted:#5b6b57;
          --primary:#2e7d32; --primary-200:#a8d5b8; --accent:#6b4f3b; --accent-100:#efe5db;
          --ring:rgba(46,125,50,.25); --shadow:0 10px 25px rgba(0,0,0,.06);
          --radius:16px; --maxw:1140px;
        }
        *{box-sizing:border-box}
        html,body{margin:0;padding:0}
        body{
          font-family:"Be Vietnam Pro",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
          background:linear-gradient(180deg,var(--bg),#fff 40%,var(--accent-100));
          color:var(--text); line-height:1.6;
        }
        a{color:inherit;text-decoration:none}
        .container{max-width:var(--maxw);margin:0 auto;padding:0 20px}

        /* NAVBAR */
        .nav{position:sticky;top:0;z-index:50;background:rgba(255,255,255,.85);
          backdrop-filter:saturate(180%) blur(10px);border-bottom:1px solid rgba(0,0,0,.06)}
        .nav-wrap{display:flex;align-items:center;justify-content:space-between;height:64px}
        .brand{display:flex;align-items:center;gap:10px;font-weight:700}
        .brand .logo{width:36px;height:36px;border-radius:10px;display:grid;place-items:center;
          background:conic-gradient(from 210deg,var(--primary-200),#d7eddc);box-shadow:var(--shadow)}
        .brand span{letter-spacing:.3px}
        .brand small{font-weight:600;color:var(--accent);margin-left:6px}
        .nav ul{list-style:none;display:flex;gap:22px;margin:0;padding:0}
        .nav a{font-weight:600}.nav a:hover{color:var(--primary)}
        .cta{display:inline-flex;align-items:center;gap:10px;background:var(--primary);color:#fff;
          padding:10px 16px;border-radius:12px;box-shadow:0 8px 20px var(--ring)}
        .menu-btn{display:none;border:0;background:transparent;font-size:26px}

        /* HERO */
        .hero{padding:64px 0;text-align:center}
        .hero h1{font-size:clamp(28px,5vw,44px);margin:0}
        .hero p{color:var(--muted);max-width:65ch;margin:10px auto 0}

        /* TOOLS */
        .tools{padding:8px 0 24px}
        .grid-tools{display:grid;grid-template-columns:1.2fr .8fr;gap:16px}
        .search{background:var(--surface);border:1px solid rgba(0,0,0,.06);border-radius:14px;
          padding:12px 14px;display:flex;gap:10px;align-items:center;box-shadow:var(--shadow)}
        .search input{flex:1;border:0;outline:none;font-size:16px}
        .cats{display:flex;gap:8px;flex-wrap:wrap}
        .chip{background:#e9f5ec;border:1px solid #d6ebdb;color:#2d5b31;padding:8px 12px;border-radius:999px;
          font-weight:700;font-size:13px;cursor:pointer;transition:transform .15s ease, box-shadow .15s ease}
        .chip:hover{transform:translateY(-1px)}
        .chip.active{box-shadow:0 0 0 4px rgba(46,125,50,.08)}

        /* FAQ LIST */
        .faq{display:grid;grid-template-columns:1fr 1fr;gap:16px}
        details{background:#fff;border:1px solid rgba(0,0,0,.06);border-radius:14px;padding:12px 14px;
          box-shadow:var(--shadow);transition:transform .18s ease}
        details:hover{transform:translateY(-2px)}
        summary{cursor:pointer;font-weight:700;color:var(--text);list-style:none}
        summary::-webkit-details-marker{display:none}
        .tag{display:inline-block;margin-top:8px;background:#f3efe9;color:#6b4f3b;padding:4px 8px;border-radius:999px;
          font-size:12px;font-weight:700}

        /* CONTACT CTA */
        .cta-block{margin-top:28px;background:linear-gradient(135deg,#eaf4ee,#fff);padding:24px;border-radius:18px;
          border:1px solid rgba(0,0,0,.06);display:flex;align-items:center;justify-content:space-between;gap:18px}

        /* FOOTER */
        footer{background:#0e1a0f;color:#d7e3d7;margin-top:40px}
        .footer-wrap{display:grid;grid-template-columns:2fr 1fr 1fr;gap:20px;padding:28px 0}
        .copyright{border-top:1px solid rgba(255,255,255,.1);padding:16px 0;color:#a6b5a6;font-size:14px}

        @media (max-width:980px){.faq{grid-template-columns:1fr}.grid-tools{grid-template-columns:1fr}}
        @media (max-width:680px){
          .nav ul{display:none;position:absolute;inset:64px 0 auto 0;background:#fff;border-bottom:1px solid rgba(0,0,0,.06);
            padding:16px 20px;flex-direction:column}
          .menu-btn{display:block}
        }

        /* ===== Scroll-reveal (fade-up + stagger) ===== */
        @media (prefers-reduced-motion:no-preference){
          .reveal{opacity:0;transform:translateY(18px);will-change:opacity,transform}
          .in-view .reveal{opacity:1;transform:none;transition:opacity .6s ease,transform .6s ease}
        }

        /* ===== Smooth expand/collapse for <details> ===== */
        .faq .content{overflow:hidden;max-height:0;opacity:.0;transform:translateY(6px);
          transition:max-height .35s ease, opacity .35s ease, transform .35s ease}
        details[open] .content{opacity:1;transform:none}
    </style>
</head>
<body>
<!-- NAVBAR -->
<th:block th:replace="~{group5_template/navbar :: navbar}"></th:block>

<!-- HERO -->
<header class="hero observe">
    <h1 class="reveal">C√¢u h·ªèi th∆∞·ªùng g·∫∑p</h1>
    <p class="reveal">Gi·∫£i ƒë√°p nhanh v·ªÅ <strong>M·∫ßm Xanh</strong> ‚Äî ph√¢n b√≥n h·ªØu c∆° t·ª´ v·ªè tr√°i c√¢y thu gom ·ªü ch·ª£.</p>
</header>

<!-- TOOLS -->
<section class="tools observe">
    <div class="container grid-tools">
        <div class="search reveal">
            üîé
            <input id="search" placeholder="T√¨m c√¢u h·ªèi: li·ªÅu l∆∞·ª£ng, th√†nh ph·∫ßn, b·∫£o qu·∫£n‚Ä¶"/>
        </div>
        <div class="cats reveal" id="cats">
            <button class="chip active" data-cat="all">T·∫•t c·∫£</button>
            <button class="chip" data-cat="su-dung">S·ª≠ d·ª•ng</button>
            <button class="chip" data-cat="thanh-phan">Th√†nh ph·∫ßn</button>
            <button class="chip" data-cat="bao-quan">B·∫£o qu·∫£n</button>
            <button class="chip" data-cat="mua-hang">Mua h√†ng</button>
            <button class="chip" data-cat="ben-vung">B·ªÅn v·ªØng</button>
        </div>
    </div>
</section>

<!-- FAQ LIST -->
<section class="container observe">
    <div id="faqList" class="faq">
        <!-- S·ª¨ D·ª§NG -->
        <details data-cat="su-dung" class="reveal">
            <summary>Li·ªÅu l∆∞·ª£ng khuy·∫øn ngh·ªã khi tr·ªìng ch·∫≠u l√† bao nhi√™u?</summary>
            <div class="content">
                <p>Tr·ªôn 10‚Äì20% th·ªÉ t√≠ch ƒë·∫•t n·ªÅn ho·∫∑c r·∫£i 50‚Äì80g/ch·∫≠u 25‚Äì30cm m·ªói 3‚Äì4 tu·∫ßn; t∆∞·ªõi gi·ªØ ·∫©m sau b√≥n.</p>
                <span class="tag">S·ª≠ d·ª•ng</span>
            </div>
        </details>
        <details data-cat="su-dung" class="reveal">
            <summary>C√≥ d√πng tr·ª±c ti·∫øp l√™n m·∫∑t ch·∫≠u kh√¥ng?</summary>
            <div class="content">
                <p>C√≥ th·ªÉ r·∫£i m·ªèng v√† tr·ªôn nh·∫π l·ªõp m·∫∑t; tr√°nh ph·ªß d√†y l√™n g·ªëc non, l√° non ƒë·ªÉ kh√¥ng b√≠ r·ªÖ.</p>
                <span class="tag">S·ª≠ d·ª•ng</span>
            </div>
        </details>
        <details data-cat="su-dung" class="reveal">
            <summary>D√πng cho rau ƒÉn l√° v√† c√¢y gia v·ªã c√≥ an to√†n?</summary>
            <div class="content">
                <p>Ph√π h·ª£p khi d√πng ƒë√∫ng li·ªÅu; s·∫£n ph·∫©m ƒë√£ ·ªß hi·∫øu kh√≠ ƒë·∫øn giai ƒëo·∫°n ·ªïn ƒë·ªãnh. Lu√¥n r·ª≠a s·∫°ch rau tr∆∞·ªõc khi ƒÉn.</p>
                <span class="tag">S·ª≠ d·ª•ng</span>
            </div>
        </details>

        <!-- TH√ÄNH PH·∫¶N -->
        <details data-cat="thanh-phan" class="reveal">
            <summary>Th√†nh ph·∫ßn ch√≠nh l√† g√¨?</summary>
            <div class="content">
                <p>V·ªè tr√°i c√¢y (cam/qu√Ωt/chu·ªëi/d·ª©a‚Ä¶) ƒë∆∞·ª£c ph√¢n lo·∫°i t·∫°i ngu·ªìn, s∆° ch·∫ø v√† ·ªß hoai, ph·ªëi tr·ªôn ph·ª• li·ªáu h·ªØu c∆° an to√†n; kh√¥ng d√πng ho√° ch·∫•t t·ªïng h·ª£p.</p>
                <span class="tag">Th√†nh ph·∫ßn</span>
            </div>
        </details>
        <details data-cat="thanh-phan" class="reveal">
            <summary>Ch·ªâ s·ªë N-P-K kho·∫£ng bao nhi√™u?</summary>
            <div class="content">
                <p>∆Ø·ªõc l∆∞·ª£ng c√¢n b·∫±ng kho·∫£ng 1‚Äì1‚Äì1 (¬±), c√≥ th·ªÉ dao ƒë·ªông nh·∫π theo l√¥ nguy√™n li·ªáu v√† th·ªùi ƒëi·ªÉm ·ªß.</p>
                <span class="tag">Th√†nh ph·∫ßn</span>
            </div>
        </details>
        <details data-cat="thanh-phan" class="reveal">
            <summary>pH c·ªßa s·∫£n ph·∫©m?</summary>
            <div class="content">
                <p>Kho·∫£ng 6.0‚Äì7.0, ph√π h·ª£p ph·∫ßn l·ªõn c√¢y tr·ªìng trong gia ƒë√¨nh v√† v∆∞·ªùn ƒë√¥ th·ªã.</p>
                <span class="tag">Th√†nh ph·∫ßn</span>
            </div>
        </details>

        <!-- B·∫¢O QU·∫¢N -->
        <details data-cat="bao-quan" class="reveal">
            <summary>B·∫£o qu·∫£n th·∫ø n√†o ƒë·ªÉ kh√¥ng b·ªã ·∫©m m·ªëc?</summary>
            <div class="content">
                <p>ƒê·∫≠y k√≠n sau khi m·ªü, ƒë·ªÉ n∆°i kh√¥ r√°o tho√°ng m√°t; tr√°nh √°nh n·∫Øng g·∫Øt v√† ngu·ªìn ·∫©m tr·ª±c ti·∫øp.</p>
                <span class="tag">B·∫£o qu·∫£n</span>
            </div>
        </details>
        <details data-cat="bao-quan" class="reveal">
            <summary>H·∫°n s·ª≠ d·ª•ng bao l√¢u?</summary>
            <div class="content">
                <p>Khuy·∫øn ngh·ªã d√πng trong 12 th√°ng t·ª´ ng√†y ƒë√≥ng g√≥i; ch·∫•t l∆∞·ª£ng duy tr√¨ t·ªët n·∫øu b·∫£o qu·∫£n ƒë√∫ng.</p>
                <span class="tag">B·∫£o qu·∫£n</span>
            </div>
        </details>

        <!-- MUA H√ÄNG -->
        <details data-cat="mua-hang" class="reveal">
            <summary>C√≥ nh·ªØng kh·ªëi l∆∞·ª£ng n√†o?</summary>
            <div class="content">
                <p>1kg, 3kg (v√† 5kg n·∫øu ƒë·∫∑t tr∆∞·ªõc).</p>
                <span class="tag">Mua h√†ng</span>
            </div>
        </details>
        <details data-cat="mua-hang" class="reveal">
            <summary>Ch√≠nh s√°ch ƒë·ªïi tr·∫£?</summary>
            <div class="content">
                <p>ƒê·ªïi tr·∫£ trong 7 ng√†y cho s·∫£n ph·∫©m c√≤n nguy√™n bao b√¨, k√®m ho√° ƒë∆°n/ƒë∆°n h√†ng.</p>
                <span class="tag">Mua h√†ng</span>
            </div>
        </details>
        <details data-cat="mua-hang" class="reveal">
            <summary>Th·ªùi gian giao h√†ng?</summary>
            <div class="content">
                <p>N·ªôi th√†nh 24‚Äì48h; li√™n t·ªânh 3‚Äì5 ng√†y l√†m vi·ªác tu·ª≥ ƒë∆°n v·ªã v·∫≠n chuy·ªÉn.</p>
                <span class="tag">Mua h√†ng</span>
            </div>
        </details>

        <!-- B·ªÄN V·ªÆNG -->
        <details data-cat="ben-vung" class="reveal">
            <summary>S·∫£n ph·∫©m c√≥ gi√∫p gi·∫£m r√°c th·∫£i kh√¥ng?</summary>
            <div class="content">
                <p>C√≥. M·ªói kg s·∫£n ph·∫©m t√°i s·ª≠ d·ª•ng ƒë√°ng k·ªÉ v·ªè tr√°i c√¢y t·ª´ ch·ª£, gi·∫£m r√°c h·ªØu c∆° ƒëem ch√¥n l·∫•p v√† ph√°t th·∫£i.</p>
                <span class="tag">B·ªÅn v·ªØng</span>
            </div>
        </details>
        <details data-cat="ben-vung" class="reveal">
            <summary>M√πi c√≥ kh√≥ ch·ªãu kh√¥ng?</summary>
            <div class="content">
                <p>Sau ·ªß ƒë·∫°t ƒë·ªô hoai m·ª•c, m√πi nh·∫π, t·ª± nhi√™n v√† tan nhanh khi tr·ªôn v√†o ƒë·∫•t.</p>
                <span class="tag">B·ªÅn v·ªØng</span>
            </div>
        </details>
    </div>

    <!-- CONTACT CTA -->
    <div class="cta-block observe">
        <div class="reveal">
            <h3>Ch∆∞a th·∫•y c√¢u tr·∫£ l·ªùi b·∫°n c·∫ßn?</h3>
            <p class="lead" style="color: var(--muted)">G·ª≠i c√¢u h·ªèi cho <strong>M·∫ßm Xanh</strong>, ch√∫ng t√¥i ph·∫£n h·ªìi s·ªõm nh·∫•t.</p>
        </div>
        <div class="reveal">
            <a class="cta" th:href="@{/contact}">Li√™n h·ªá ngay</a>
        </div>
    </div>
</section>

<!-- FOOTER -->
<th:block th:replace="~{group5_template/footer :: footer}"></th:block>

<script>
    // Navbar mobile
    const menuBtn=document.getElementById("menuBtn");
    const navMenu=document.getElementById("navMenu");
    menuBtn?.addEventListener("click",()=>{
      const visible=getComputedStyle(navMenu).display!=="none";
      navMenu.style.display=visible?"none":"flex";
    });

    // Year
    const yearEl=document.getElementById("year");
    if(yearEl) yearEl.textContent=new Date().getFullYear();

    // Search & filter
    const searchInput=document.getElementById("search");
    const chips=document.querySelectorAll(".chip");
    const list=document.getElementById("faqList");
    const items=[...list.querySelectorAll("details")];

    let activeCat="all";
    chips.forEach(c=>c.addEventListener("click",()=>{
      chips.forEach(x=>x.classList.remove("active"));
      c.classList.add("active");
      activeCat=c.dataset.cat||"all";
      filter();
    }));
    searchInput.addEventListener("input",filter);

    function filter(){
      const q=(searchInput.value||"").toLowerCase().trim();
      items.forEach(it=>{
        const inCat=activeCat==="all"||it.dataset.cat===activeCat;
        const txt=(it.textContent||"").toLowerCase();
        const match=!q||txt.includes(q);
        it.style.display=inCat&&match?"block":"none";
      });
    }

    // ===== Smooth <details> expand/collapse =====
    function setupDetailsAnimation(root=document){
      const detailsEls=[...root.querySelectorAll("details")];
      detailsEls.forEach(d=>{
        // ensure content wrapper exists (in case of SSR edits)
        const content=d.querySelector(".content");
        if(!content) return;
        // set height on toggle for smooth animation
        d.addEventListener("toggle",()=>{
          if(window.matchMedia('(prefers-reduced-motion: reduce)').matches){ // respect user setting
            content.style.maxHeight = d.open ? "none" : "0px";
            content.style.opacity = d.open ? "1" : "0";
            return;
          }
          if(d.open){
            content.style.maxHeight=content.scrollHeight+"px";
            // after transition, remove max-height to allow responsive content growth
            content.addEventListener("transitionend",function handler(e){
              if(e.propertyName==="max-height"){ content.style.maxHeight="none"; content.removeEventListener("transitionend",handler); }
            });
          }else{
            // set current height to allow animating back to 0
            const h=content.scrollHeight;
            content.style.maxHeight=h+"px";
            // force reflow then set to 0
            content.offsetHeight; // eslint-disable-line no-unused-expressions
            content.style.maxHeight="0px";
          }
        });
        // initialize closed state height = 0 (if not open)
        if(!d.open){ content.style.maxHeight="0px"; }
        else { content.style.maxHeight="none"; content.style.opacity="1"; }
      });
    }
    setupDetailsAnimation();

    // ===== Scroll-reveal (IntersectionObserver + stagger) =====
    (function(){
      if(window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;
      const observers=[...document.querySelectorAll('.observe')];
      const io=new IntersectionObserver((entries)=>{
        entries.forEach(entry=>{
          if(entry.isIntersecting){
            const block=entry.target;
            block.classList.add('in-view');
            const kids=[...block.querySelectorAll('.reveal')];
            kids.forEach((el,i)=>{ el.style.transitionDelay=`${Math.min(i*80,600)}ms`; });
            io.unobserve(block);
          }
        });
      },{threshold:0.15});
      // mark top-level containers as observe if not already
      document.querySelectorAll('header.hero, section.tools, section.container, .cta-block').forEach(el=>{
        if(!el.classList.contains('observe')) el.classList.add('observe');
      });
      observers.concat().forEach(el=>io.observe(el));
    })();
</script>
</body>
</html>
