<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title th:text="${title} ?: 'Li√™n h·ªá ‚Äî M·∫ßm Xanh'">Li√™n h·ªá ‚Äî M·∫ßm Xanh</title>
    <meta name="description" th:content="${desc} ?: 'Li√™n h·ªá v·ªõi M·∫ßm Xanh ƒë·ªÉ t√¨m hi·ªÉu ph√¢n b√≥n h·ªØu c∆° t·ª´ v·ªè tr√°i c√¢y thu gom ·ªü ch·ª£, h·ª£p t√°c v√† ph·∫£n h·ªìi.'"/>
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;600;700&display=swap" rel="stylesheet"/>

    <style>
        :root{
          --bg:#f3fbf5;--surface:#fff;--text:#1f3520;--muted:#5a6b57;
          --primary:#2e7d32;--primary-100:#e9f5ec;--primary-200:#cfe9d7;--primary-600:#256b29;
          --accent:#6b4f3b;--accent-100:#efe5db;--shadow:0 10px 25px rgba(0,0,0,.06);
          --radius:16px;--maxw:1140px;--ring:rgba(46,125,50,.25);
        }
        *{box-sizing:border-box}
        html,body{margin:0;padding:0}
        body{
          font-family:"Be Vietnam Pro",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
          background:
            radial-gradient(1400px 600px at 10% -10%, #ecfff1 0, transparent 60%),
            radial-gradient(1200px 500px at 110% -20%, #e5fff0 0, transparent 55%),
            linear-gradient(180deg,var(--bg),#fff 40%,var(--accent-100));
          color:var(--text); line-height:1.6;
        }
        a{color:inherit;text-decoration:none}
        .container{max-width:var(--maxw);margin:0 auto;padding:0 20px}

        /* NAVBAR */
        .nav{position:sticky;top:0;z-index:50;background:rgba(255,255,255,.85);
          backdrop-filter:saturate(180%) blur(10px);border-bottom:1px solid rgba(0,0,0,.06)}
        .nav-wrap{display:flex;align-items:center;justify-content:space-between;height:64px}
        .brand{display:flex;align-items:center;gap:10px;font-weight:700}
        .brand .logo{width:36px;height:36px;border-radius:10px;display:grid;place-items:center;
          background:conic-gradient(from 210deg,var(--primary-200),#d7eddc);box-shadow:var(--shadow)}
        .brand span{letter-spacing:.3px}
        .brand small{font-weight:600;color:var(--accent);margin-left:6px}
        .nav ul{list-style:none;display:flex;gap:22px;margin:0;padding:0}
        .nav a{font-weight:600}.nav a:hover{color:var(--primary)}
        .cta{display:inline-flex;align-items:center;gap:10px;background:var(--primary);color:#fff;
          padding:10px 16px;border-radius:12px;box-shadow:0 8px 20px var(--ring)}
        .menu-btn{display:none;border:0;background:transparent;font-size:26px}


        /* HERO */
        .hero{padding:64px 0;text-align:center}
        .hero h1{font-size:clamp(28px,5vw,44px);margin:0}
        .hero p{color:var(--muted);max-width:65ch;margin:10px auto 0}

        /* CONTACT */
        .contact{padding:48px 0}
        .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:28px;align-items:stretch}
        .card{
          background:var(--surface);padding:22px;border-radius:16px;box-shadow:var(--shadow);
          border:1px solid rgba(0,0,0,.06);display:flex;flex-direction:column;transition:transform .2s ease
        }
        .card:hover{transform:translateY(-2px)}
        .card h2{margin:0 0 12px}
        form{display:grid;gap:16px;margin-top:6px}
        .field{display:flex;flex-direction:column;gap:8px}
        label{font-weight:700;color:#223b22}
        .hint{font-size:12px;color:#577a59}
        .err{font-size:12px;color:#7a271a;display:none}
        input,textarea{
          width:100%;padding:14px 16px;border:1px solid var(--primary-200);border-radius:12px;
          font:inherit;font-size:15px;background:#fff;transition:border-color .2s, box-shadow .2s, background .2s
        }
        input:focus,textarea:focus{border-color:var(--primary);box-shadow:0 0 0 3px rgba(46,125,50,.18);outline:none}
        input:invalid[aria-invalid="true"], textarea:invalid[aria-invalid="true"]{
          border-color:#e76a5f; box-shadow:0 0 0 3px rgba(231,106,95,.18); background:#fff7f6;
        }
        textarea{min-height:140px;resize:vertical}
        button{
          background:linear-gradient(180deg,var(--primary),var(--primary-600));
          color:#fff;padding:14px 22px;border:0;border-radius:14px;font-weight:800;cursor:pointer;
          font-size:16px;box-shadow:0 6px 18px rgba(46,125,50,.25);transition:transform .2s,opacity .2s;
          justify-self:center;min-width:200px
        }
        button:hover{opacity:.96;transform:translateY(-1.5px)}
        button:disabled{opacity:.6;cursor:not-allowed;transform:none}

        /* INFO */
        .info ul{list-style:none;padding:0;margin:0;display:grid;gap:12px}
        .info li strong{display:block;margin-bottom:2px}

        /* ALERTS */
        .alert{padding:12px 14px;border-radius:12px;margin:10px 0 14px;font-weight:700}
        .alert-success{background:#e8f4ea;color:#1f5f28;border:1px solid #bfe3c7}
        .alert-error{background:#fdecea;color:#7a271a;border:1px solid #f7c5bf}

        /* FOOTER */
        footer{background:#0e1a0f;color:#d7e3d7;margin-top:40px}
        .footer-wrap{display:grid;grid-template-columns:2fr 1fr 1fr;gap:20px;padding:28px 0}
        .copyright{border-top:1px solid rgba(255,255,255,.1);padding:16px 0;color:#a6b5a6;font-size:14px}

        /* Responsive */
        @media (max-width:900px){.grid-2{grid-template-columns:1fr}.footer-wrap{grid-template-columns:1fr}}
        @media (max-width:680px){
          .nav ul{display:none;position:absolute;inset:64px 0 auto 0;background:#fff;border-bottom:1px solid rgba(0,0,0,.06);padding:16px 20px;flex-direction:column}
          .menu-btn{display:block}
        }

        /* thong tin lien he */
        .contact-info{list-style:none;padding:0;margin:12px 0;width:100%;font-size:15px;line-height:1.6}
        .contact-info li{
          width:100%;padding:12px 16px;margin-bottom:10px;background:var(--primary-100,#f0f7f2);
          border-radius:12px;display:grid;grid-template-columns:160px 1fr;align-items:center;
          box-shadow:0 1px 3px rgba(0,0,0,0.08);transition:background .2s ease, transform .2s ease
        }
        .contact-info li:hover{background:#e4f3e7;transform:translateY(-1px)}
        .contact-info strong{color:#2e7d32;font-weight:700}
        .contact-info a{color:#2e7d32;text-decoration:none;font-weight:600}
        .contact-info a:hover{text-decoration:underline}
        @media (max-width:520px){.contact-info li{grid-template-columns:1fr;row-gap:4px}}

        /* ===== Scroll-reveal (fade-up) ===== */
        @media (prefers-reduced-motion:no-preference){
          .reveal{opacity:0;transform:translateY(18px);will-change:opacity,transform}
          .in-view .reveal{opacity:1;transform:none;transition:opacity .6s ease,transform .6s ease}
        }
    </style>
</head>
<body>
<!-- NAVBAR -->
<th:block th:replace="~{group5_template/navbar :: navbar}"></th:block>

<!-- HERO -->
<header class="hero observe">
    <h1 class="reveal">Li√™n h·ªá</h1>
    <p class="reveal" th:text="${tagline} ?: 'K·∫øt n·ªëi v·ªõi M·∫ßm Xanh ƒë·ªÉ c√πng bi·∫øn v·ªè tr√°i c√¢y ·ªü ch·ª£ th√†nh d∆∞·ª°ng ch·∫•t cho ƒë·∫•t'">
        K·∫øt n·ªëi v·ªõi M·∫ßm Xanh ƒë·ªÉ c√πng bi·∫øn v·ªè tr√°i c√¢y ·ªü ch·ª£ th√†nh d∆∞·ª°ng ch·∫•t cho ƒë·∫•t
    </p>
</header>

<!-- CONTACT SECTION -->
<section class="contact">
    <div class="container grid-2 observe">
        <!-- FORM -->
        <div class="card reveal">
            <h2>üå± G·ª≠i tin nh·∫Øn cho ch√∫ng t√¥i</h2>

            <!-- Alerts t·ª´ Controller -->
            <div th:if="${success}" class="alert alert-success reveal" th:text="${success}" aria-live="polite">G·ª≠i th√†nh c√¥ng</div>
            <div th:if="${error}" class="alert alert-error reveal" th:text="${error}" aria-live="assertive">C√≥ l·ªói x·∫£y ra</div>

            <form id="contactForm" th:action="@{/contact}" method="post" novalidate>
                <!-- CSRF (n·∫øu c√≥ Spring Security) -->
                <input type="hidden" th:if="${_csrf != null}" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

                <div class="field reveal">
                    <label for="name">H·ªç v√† t√™n</label>
                    <input id="name" name="name" type="text" minlength="2" required
                           placeholder="V√≠ d·ª•: Nguy·ªÖn VƒÉn A" autocomplete="name" aria-invalid="false"/>
                    <div class="hint">Nh·∫≠p √≠t nh·∫•t 2 k√Ω t·ª±.</div>
                    <div class="err" id="err-name">Vui l√≤ng nh·∫≠p h·ªç v√† t√™n h·ª£p l·ªá.</div>
                </div>

                <div class="field reveal">
                    <label for="email">Email</label>
                    <input id="email" name="email" type="email" required
                           placeholder="mamxanh@gmail.com" autocomplete="email" aria-invalid="false"/>
                    <div class="err" id="err-email">Email ch∆∞a ƒë√∫ng ƒë·ªãnh d·∫°ng.</div>
                </div>

                <div class="field reveal">
                    <label for="phone">S·ªë ƒëi·ªán tho·∫°i</label>
                    <input id="phone" name="phone" type="tel" inputmode="tel"
                           placeholder="VD: 0912345678 ho·∫∑c +84912345678"
                           pattern="^(\+?84|0)(3|5|7|8|9)\d{8}$" required aria-invalid="false"
                           title="S·ªë VN: b·∫Øt ƒë·∫ßu b·∫±ng 0 ho·∫∑c +84, ti·∫øp theo l√† 3/5/7/8/9 v√† 8 s·ªë n·ªØa"/>
                    <div class="hint">ƒê·ªãnh d·∫°ng VN: 0xxxxxxxxx ho·∫∑c +84xxxxxxxxx.</div>
                    <div class="err" id="err-phone">S·ªë ƒëi·ªán tho·∫°i VN ch∆∞a ƒë√∫ng.</div>
                </div>

                <div class="field reveal">
                    <label for="message">N·ªôi dung</label>
                    <textarea id="message" name="message" minlength="10" required placeholder="B·∫°n c·∫ßn h·ªó tr·ª£ ƒëi·ªÅu g√¨? (v√≠ d·ª•: d√πng cho rau/hoa, li·ªÅu l∆∞·ª£ng, m√πi‚Ä¶)"></textarea>
                    <div class="hint">T·ªëi thi·ªÉu 10 k√Ω t·ª± ƒë·ªÉ ch√∫ng t√¥i hi·ªÉu r√µ h∆°n.</div>
                    <div class="err" id="err-message">Vui l√≤ng nh·∫≠p n·ªôi dung (‚â• 10 k√Ω t·ª±).</div>
                </div>

                <button id="submitBtn" type="submit" class="reveal">G·ª≠i li√™n h·ªá</button>
            </form>
        </div>

        <!-- INFO -->
        <div class="card info reveal">
            <h2>Th√¥ng tin li√™n l·∫°c</h2>

            <div class="logo-wrap reveal" style="text-align:center;padding:24px">
                <img src="/img/logo2.png" alt="M·∫ßm Xanh Logo" style="max-width:180px;height:auto;" />
            </div>

            <ul class="contact-info">
                <li class="reveal"><strong>ƒê·ªãa ch·ªâ:</strong>NVC N·ªëi D√†i, An B√¨nh, B√¨nh Th·ªßy, C·∫ßn Th∆°, Vi·ªát Nam</li>
                <li class="reveal"><strong>Email:</strong> <a href="mailto:mamxanhh.ct@gmail.com">mamxanhh.ct@gmail.com</a></li>
                <li class="reveal">
                    <strong>Facebook:</strong>
                    <a href="https://www.facebook.com/mamxanh.house" rel="nofollow" target="_blank">@mamnau</a>
                </li>
                <li class="reveal"><strong>Established date:</strong>18/09/2025</li>
            </ul>
        </div>
    </div>
</section>

<!-- FOOTER -->
<th:block th:replace="~{group5_template/footer :: footer}"></th:block>

<!-- ======= CONTACT FORM VALIDATION + ANIMATIONS ======= -->
<script>
    // Menu mobile
    const menuBtn = document.getElementById("menuBtn");
    const navMenu = document.getElementById("navMenu");
    menuBtn?.addEventListener("click", () => {
      const visible = getComputedStyle(navMenu).display !== "none";
      navMenu.style.display = visible ? "none" : "flex";
    });
    const y = document.getElementById("year"); if (y) y.textContent = new Date().getFullYear();

    // VALIDATION
    const form = document.getElementById('contactForm');
    const submitBtn = document.getElementById('submitBtn');

    function showError(input, errId){
      const err = document.getElementById(errId);
      input.setAttribute('aria-invalid', 'true');
      if (err) err.style.display = 'block';
    }
    function clearError(input, errId){
      const err = document.getElementById(errId);
      input.setAttribute('aria-invalid', 'false');
      if (err) err.style.display = 'none';
    }
    function validateField(input, errId, extra){
      let ok = input.checkValidity();
      if (extra && ok) ok = extra(input);
      if (!ok) showError(input, errId); else clearError(input, errId);
      return ok;
    }

    const minMessage = 10;
    const nameInput = document.getElementById('name');
    const emailInput = document.getElementById('email');
    const phoneInput = document.getElementById('phone');
    const messageInput = document.getElementById('message');

    [nameInput, emailInput, phoneInput, messageInput].forEach(el => {
      el.addEventListener('input', () => {
        const id = el.id;
        const map = {name:'err-name', email:'err-email', phone:'err-phone', message:'err-message'};
        if(id === 'message'){
          validateField(el, map[id], inp => inp.value.trim().length >= minMessage);
        } else if (id === 'name'){
          validateField(el, map[id], inp => inp.value.trim().length >= 2);
        } else {
          validateField(el, map[id]);
        }
      });
      el.addEventListener('blur', () => el.dispatchEvent(new Event('input')));
    });

    form.addEventListener('submit', (e) => {
      nameInput.value = nameInput.value.trim();
      emailInput.value = emailInput.value.trim();
      phoneInput.value = phoneInput.value.trim();
      messageInput.value = messageInput.value.trim();

      const okName = validateField(nameInput, 'err-name', inp => inp.value.length >= 2);
      const okEmail = validateField(emailInput, 'err-email');
      const okPhone = validateField(phoneInput, 'err-phone');
      const okMsg  = validateField(messageInput, 'err-message', inp => inp.value.length >= minMessage);

      if(!(okName && okEmail && okPhone && okMsg)){
        e.preventDefault();
        (document.querySelector('[aria-invalid="true"]') || nameInput).focus();
        return;
      }

      submitBtn.disabled = true;
      submitBtn.textContent = 'ƒêang g·ª≠i...';
    });

    // ===== Scroll-reveal (IntersectionObserver + stagger) =====
    (function(){
      if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;

      // mark containers as observe
      document.querySelectorAll('header.hero, .grid-2').forEach(el=>{
        if(!el.classList.contains('observe')) el.classList.add('observe');
      });

      const blocks = document.querySelectorAll('.observe');
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(entry=>{
          if(entry.isIntersecting){
            const root = entry.target;
            root.classList.add('in-view');

            const kids = root.querySelectorAll('.reveal');
            kids.forEach((el,i)=>{ el.style.transitionDelay = `${Math.min(i*80, 600)}ms`; });

            io.unobserve(root); // reveal 1 l·∫ßn
          }
        });
      }, {threshold:0.15});

      blocks.forEach(b=>io.observe(b));
    })();
</script>

<!-- (Tu·ª≥ ch·ªçn) 3D vui v·∫ª -->
<!-- <script defer src="/js/three.min.js"></script> -->
<!-- <script defer src="/js/plant3d-init.js"></script> -->
</body>
</html>
